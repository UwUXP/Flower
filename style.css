*,
*::after,
*::before {
  padding: 0;
  margin: 0;
  box-sizing: border-box;
}

:root {
  --dark-color: #000;
}

body {
  display: flex;
  align-items: flex-end;
  justify-content: center;
  min-height: 100vh;
  background-color: var(--dark-color);
  overflow: hidden;
  /* รักษา perspective ที่นี่ แต่จะเพิ่ม transform-style ใน .flowers */
  perspective: 1000px;
}

/* ... โค้ดส่วนอื่นๆ ที่เกี่ยวข้องกับสีชมพู (ใช้โค้ดเดิม) ... */

.flowers {
  position: relative;
  transform: scale(0.9);
  /* 2. Fix Layout/Grouping: เพิ่ม transform-style */
  transform-style: preserve-3d; 
  /* 1. Fix: ปรับตำแหน่งให้อยู่กลางและลอยขึ้นเล็กน้อย (ถ้าจำเป็น) */
  bottom: 0vmin; 
}

/* ---------------------------------------------------------------- */
/* --- ส่วนสำหรับสถานะเริ่มต้น (หุบ) และการบาน --- */
/* ---------------------------------------------------------------- */

/* ... โค้ดส่วนอื่นๆ ของดอกไม้และใบไม้ ... */

.flower {
  position: absolute;
  /* Fix: ลด bottom ลงเพื่อให้ดอกไม้ไม่ลอยเหนือพื้น */
  bottom: 0vmin; 
  transform-origin: bottom center;
  z-index: 10;
  --fl-speed: 0.8s;
}

/* 3. สไตล์สำหรับดอกไม้ใหม่ 4, 5, 6 */
.flower--4 {
  left: -20vmin;
  transform: rotate(5deg) scale(0.7);
  animation: moving-flower-4 3.8s linear infinite;
}
/* ... Flower 5, 6 styles (ใช้โค้ดเดิม) ... */


/* ---------------------------------------------------------------- */
/* --- โค้ดสำหรับใบไม้/ก้านที่ร่วงหล่น/ยื่นออกนอกกลุ่ม (Fix) --- */
/* ---------------------------------------------------------------- */

/* Flower Line (ก้านหลัก) - Fix animation grow-flower-tree */
/* ตรวจสอบให้แน่ใจว่า animation grow-flower-tree ไม่ทำให้ตำแหน่งเพี้ยน */

/* Long-g (ใบไม้ใหญ่/พุ่มไม้ด้านข้าง) */
.long-g {
  position: absolute;
  bottom: 6vmin;
  left: 20vmin;
  z-index: 10;
  transform-origin: bottom left;
  transform: rotate(50deg);
}

/* ---------------------------------------------------------------- */
/* --- โค้ดสำหรับเอฟเฟกต์หัวใจ (ปรับขนาดและความทึบ) --- */
/* ---------------------------------------------------------------- */

.heart-particle {
  position: absolute;
  /* 3. เพิ่มขนาด 25% (35px * 1.25 = 43.75px) */
  font-size: 44px; 
  pointer-events: none;
  user-select: none;
  z-index: 1000; 
  opacity: 0.75; /* 3. ลดความเข้มเหลือ 75% */
  animation: floatUp 3s ease-out forwards; 
}

/* แอนิเมชันการลอยขึ้นของหัวใจ */
@keyframes floatUp {
  0% {
    opacity: 0.75; /* เริ่มต้นที่ 75% */
    transform: translate(0, 0) scale(1);
  }
  50% {
    opacity: 0.75;
  }
  100% {
    opacity: 0;
    transform: translate(calc(var(--rand-x) * 1px), -200px) scale(0.5); 
  }
}

/* ... โค้ด @keyframes ส่วนอื่นๆ (ใช้โค้ดเดิม) ... */
